import{a as j,b as N,e as P,l as U}from"./chunk-QNAUOHVV.js";import{a as W,d as p}from"./chunk-3QCEBEYH.js";import{$a as T,Ea as g,Ga as _,Ia as i,Ja as t,Ka as w,N as I,Na as M,Oa as c,Pa as h,Ra as n,S as y,Sa as s,Ta as O,Ua as S,V as x,Va as D,Wa as C,Ya as k,Za as v,_a as F,ca as b,da as f,sb as $,ua as l,ub as V,va as E,wb as B}from"./chunk-N3C7RMIE.js";var u=class a{constructor(e){this._http=e}getCarts(){return this._http.get(`${p.baseUrl}carts`)}getCartById(e){return this._http.get(`${p.baseUrl}Carts/${e}`)}deleteOrder(e){return this._http.delete(`${p.baseUrl}Carts/${e}`)}getInRange(e,r){return this._http.get(`${p.baseUrl}Carts?startdate=${e}&endDate=${r}`)}static \u0275fac=function(r){return new(r||a)(y(W))};static \u0275prov=I({token:a,factory:a.\u0275fac,providedIn:"root"})};function Q(a,e){if(a&1){let r=M();i(0,"tr")(1,"th",8),n(2),v(3,"date"),t(),i(4,"th",8),n(5),t(),i(6,"th",8)(7,"button",17),c("click",function(){let m=b(r).$implicit,d=h();return f(d.viewOrderDetalis(m.id))}),n(8,"View"),t()(),i(9,"th",8)(10,"button",18),c("click",function(){let m=b(r).$implicit,d=h();return f(d.deleteOrder(m.id))}),n(11,"Delete"),t()()()}if(a&2){let r=e.$implicit;l(2),s(T(3,2,r.date,"fullDate")),l(3),s(r.products.length)}}function q(a,e){if(a&1&&(i(0,"tr")(1,"th",8),n(2),t(),i(3,"th",8),n(4),t()()),a&2){let r=e.$implicit;l(2),s(r.productId),l(2),s(r.quantity)}}var H=class a{constructor(e){this._orderSer=e}orders=[];startDate;endDate;order={};ngOnInit(){this.getOrders()}getOrders(){this._orderSer.getCarts().subscribe(e=>{this.orders=e})}deleteOrder(e){this._orderSer.deleteOrder(e).subscribe(r=>{this.orders=this.orders.filter(o=>o.id!=r.id)})}Sort(){this.startDate&&this.endDate?this._orderSer.getInRange(this.startDate,this.endDate).subscribe(e=>{this.orders=e},e=>{alert(e)}):alert("Select Date Range")}viewOrderDetalis(e){this._orderSer.getCartById(e).subscribe(r=>{this.order=r})}static \u0275fac=function(r){return new(r||a)(E(u))};static \u0275cmp=x({type:a,selectors:[["app-order"]],standalone:!0,features:[k],decls:44,vars:8,consts:[[1,"shadow","p-3"],[1,"d-flex","justify-content-between"],["for","SD",1,"mx-2","lead"],["type","date","name","startDate","id","SD",3,"ngModelChange","ngModel"],["for","ED",1,"mx-2","lead"],["type","date","name","endDate","id","ED",3,"ngModelChange","ngModel"],[1,"btn","btn-outline-info",3,"click"],[1,"table","text-center","table-bordered","mt-4","w-100"],["scope","col"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body"],[1,"fw-bolder"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-info","form-control"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-outline-info","form-control",3,"click"],[1,"btn","btn-outline-danger","form-control",3,"click"]],template:function(r,o){r&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"label",2),n(4,"Start Date"),t(),i(5,"input",3),C("ngModelChange",function(d){return D(o.startDate,d)||(o.startDate=d),d}),t()(),i(6,"div")(7,"label",4),n(8,"End Date"),t(),i(9,"input",5),C("ngModelChange",function(d){return D(o.endDate,d)||(o.endDate=d),d}),t()(),i(10,"button",6),c("click",function(){return o.Sort()}),n(11,"Apply"),t()(),i(12,"table",7)(13,"thead")(14,"tr")(15,"th",8),n(16,"Date"),t(),i(17,"th",8),n(18,"Quantity"),t(),w(19,"th",8)(20,"th",8),t()(),i(21,"tbody"),g(22,Q,12,5,"tr",9),t()()(),i(23,"div",10)(24,"div",11)(25,"div",12)(26,"div",13)(27,"h1",14),n(28),t(),i(29,"h3",14),n(30),v(31,"date"),t(),i(32,"table",7)(33,"thead")(34,"tr")(35,"th",8),n(36,"Product"),t(),i(37,"th",8),n(38,"Quantity"),t()()(),i(39,"tbody"),g(40,q,5,2,"tr",9),t()()(),i(41,"div",15)(42,"button",16),n(43,"Close"),t()()()()()),r&2&&(l(5),S("ngModel",o.startDate),l(4),S("ngModel",o.endDate),l(13),_("ngForOf",o.orders),l(6),O("User : ",o.order.id,""),l(2),O("Order Date : ",F(31,6,o.order.date),""),l(10),_("ngForOf",o.order.products))},dependencies:[B,$,V,U,j,N,P]})};export{H as OrderComponent};
